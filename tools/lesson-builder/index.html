<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyberdelic Lesson Project Architect</title>
    <!-- Use the same course font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div class="app-layout">
        <!-- SIDEBAR: TOOLBOX -->
        <aside class="sidebar">
            <div class="brand">
                <h1>PROJECT ARCHITECT</h1>
                <p>Construct Reality</p>
            </div>

            <div class="meta-section">
                <label>Lesson Title</label>
                <input type="text" id="lesson-title" value="New Cyberdelic Lesson">
                <label>Description</label>
                <textarea id="lesson-desc">Overview of the module...</textarea>
                <label>Theme Color</label>
                <input type="color" id="lesson-color" value="#00d9ff">
            </div>

            <div class="toolbox">
                <h3>MODULE TYPES</h3>
                <div class="tool-item" draggable="true" data-type="progressive-disclosure">
                    <span class="icon">üìë</span> Progressive Disclosure
                </div>
                <div class="tool-item" draggable="true" data-type="scenario-based">
                    <span class="icon">üé≠</span> Scenario Based
                </div>
                <!-- Interactive Sim is too complex for V1 drag drop, strictly JSON for now? 
                     Actually user asked for "place new type here" mechanics. -->
                <div class="tool-item" draggable="true" data-type="interactive-simulation">
                    <span class="icon">üï∏Ô∏è</span> Interactive Simulation
                </div>
            </div>

            <div class="actions">
                <div style="margin-top:auto; padding-top:20px; border-top:1px solid #333;">
                    <button class="primary-btn" id="btn-export" style="width:100%; margin-bottom:10px;">EXPORT
                        JSON</button>
                    <button class="primary-btn" id="btn-cloud-save"
                        style="width:100%; background:#7b5cff; margin-bottom:10px;">‚òÅ SAVE TO GITHUB</button>
                    <button class="btn-small" id="btn-gh-settings" style="width:100%; margin:0;">‚öô GitHub
                        Settings</button>
                    <button class="btn-small" id="btn-gh-settings" style="width:100%; margin:0;">‚öô GitHub
                        Settings</button>
                </div>
        </aside>

        <!-- CANVAS AREA -->
        <main class="canvas-area">
            <div class="canvas-container" id="canvas-container">
                <svg id="connections-layer"></svg>
                <!-- Modules will be rendered here -->
            </div>

            <div class="drop-hint" id="drop-hint">
                <div style="font-size:30px; margin-bottom:10px;">+</div>
                Drag a submodule from the toolbox here
            </div>
    </div>
    </div>

    <!-- GITHUB SETTINGS MODAL -->
    <div id="gh-modal"
        style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:1000; align-items:center; justify-content:center;">
        <div style="background:#111; padding:30px; border:1px solid #333; width:400px; border-radius:8px;">
            <h3 style="color:#00d9ff; margin-top:0;">GitHub Configuration</h3>
            <p style="font-size:12px; color:#888;">Enter your Personal Access Token (classic) with "repo" scope.</p>

            <div class="form-group" style="margin-bottom:15px;">
                <label style="display:block; color:#666; font-size:11px; margin-bottom:5px;">USERNAME</label>
                <input type="text" id="gh-user"
                    style="width:100%; background:#000; border:1px solid #333; color:#fff; padding:8px;">
            </div>

            <div class="form-group" style="margin-bottom:15px;">
                <label style="display:block; color:#666; font-size:11px; margin-bottom:5px;">REPOSITORY NAME</label>
                <input type="text" id="gh-repo"
                    style="width:100%; background:#000; border:1px solid #333; color:#fff; padding:8px;"
                    placeholder="Cyberdelics-101-Web-Structure">
            </div>

            <div class="form-group" style="margin-bottom:20px;">
                <label style="display:block; color:#666; font-size:11px; margin-bottom:5px;">PERSONAL ACCESS
                    TOKEN</label>
                <input type="password" id="gh-token"
                    style="width:100%; background:#000; border:1px solid #333; color:#fff; padding:8px;">
            </div>

            <div style="display:flex; justify-content:flex-end; gap:10px;">
                <button id="gh-cancel"
                    style="padding:8px 16px; background:none; border:1px solid #333; color:#aaa; cursor:pointer;">Cancel</button>
                <button id="gh-save"
                    style="padding:8px 16px; background:#00d9ff; border:none; color:#000; font-weight:bold; cursor:pointer;">Save
                    Config</button>
            </div>
        </div>
    </div>

    </div>
    </main>
    </div>

    <!-- INTERACTIVE SIMULATION BUILDER MODAL -->
    <div id="sim-builder-modal"
        style="display:none; position:fixed; inset:0; background:#000; z-index:2000; flex-direction:column;">

        <!-- HEADER -->
        <header
            style="height:50px; border-bottom:1px solid #333; display:flex; align-items:center; padding:0 20px; background:#111;">
            <button onclick="InteractiveBuilder.close()"
                style="background:none; border:none; color:#ffff; cursor:pointer;">‚úñ CLOSE EDITOR</button>
            <div style="margin-left:20px; font-weight:bold; color:#00d9ff;">Interactive Simulation Editor</div>
            <div id="sim-breadcrumbs" style="margin-left:20px; color:#666; font-size:12px; display:flex; gap:5px;">
            </div>
        </header>

        <!-- MAIN EDITOR AREA -->
        <div style="flex:1; display:flex; overflow:hidden; position:relative;">

            <!-- OVERLAY UI -->
            <!-- 1. Floating Menu -->
            <div id="sim-floating-menu" class="sim-floating-menu">
                <div class="menu-title">TOOLS</div>
                <div style="display:flex; gap:10px;">
                    <button onclick="InteractiveBuilder.spawnNode()" class="btn-small">‚óè SPAWN NODE</button>
                    <button onclick="InteractiveBuilder.spawnContainer()" class="btn-small">‚¨ú SPAWN CONTAINER</button>
                </div>
            </div>

            <!-- 2. Back Button (Top Left of Canvas) -->
            <button id="sim-back-btn" onclick="InteractiveBuilder.zoomOut()" class="sim-back-btn" style="display:none;">
                ‚¨Ö BACK TO PREVIOUS LAYER
            </button>

            <!-- CANVAS VIEWPORT -->
            <div id="sim-builder-view"
                style="flex:1; position:relative; overflow:hidden; background:#050505; cursor:grab;">
                <!-- Moving Content Layer -->
                <div id="sim-builder-content"
                    style="position:absolute; width:100%; height:100%; top:0; left:0; transform-origin: 0 0;">
                    <!-- Nodes Render Here -->
                </div>
            </div>

            <!-- INSPECTOR PANEL -->
            <aside id="sim-inspector-panel"
                style="width:250px; background:#111; border-left:1px solid #333; padding:20px; z-index:10;">
                <p style="color:#666; font-style:italic;">Select a node to edit details.</p>
            </aside>
        </div>
    </div>
    style="width:250px; background:#111; border-left:1px solid #333; padding:20px;">
    <p style="color:#666; font-style:italic;">Select a node to edit details.</p>
    </aside>
    </div>
    </div>

    <!-- Scripts -->
    <script src="interactive-builder.js"></script>
    <script src="builder.js"></script>
</body>

</html>